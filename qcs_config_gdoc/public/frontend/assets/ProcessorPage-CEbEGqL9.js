import{d as R,g as j,h as A,i as p,o as l,c as r,n as P,u as z,j as T,k as v,l as w,v as E,t as B,b as a,F as L,m as $,p as J,q as d,x as K,y as D,z as M,A as G,B as H,C as Q,D as W}from"./index-Cnh6L6Ec.js";const X={class:"relative flex items-center"},Y=["disabled","id","value"],Z=["value","disabled","selected"],ee=R({inheritAttrs:!1,__name:"Select",props:{size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},options:{}},emits:["update:modelValue"],setup(I,{emit:m}){const t=I,b=m;j();const f=A();function x(e){b("update:modelValue",e.target.value)}const _=p(()=>{var e;return((e=t.options)==null?void 0:e.map(s=>typeof s=="string"?{label:s,value:s}:s).filter(Boolean))||[]}),k=p(()=>t.disabled?"text-gray-500":"text-gray-800"),g=p(()=>({sm:"text-base",md:"text-base",lg:"text-lg",xl:"text-xl"})[t.size]),y=p(()=>({sm:"px-2",md:"px-2.5",lg:"px-3",xl:"px-3"})[t.size]),h=p(()=>{let e={sm:"rounded h-7",md:"rounded h-8",lg:"rounded-md h-10",xl:"rounded-md h-10"}[t.size],s=t.disabled?"disabled":t.variant,c={subtle:"border border-gray-100 bg-gray-100 hover:border-gray-200 hover:bg-gray-200 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white hover:border-gray-400 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",ghost:"bg-transparent border-transparent hover:bg-gray-200 focus:bg-gray-200 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border",t.variant!=="ghost"?"bg-gray-50":"",t.variant==="outline"?"border-gray-300":"border-transparent"]}[s];return[e,g.value,y.value,c,k.value,"transition-colors w-full py-0"]});let o=p(()=>({sm:"pl-2",md:"pl-2.5",lg:"pl-3",xl:"pl-3"})[t.size]);return(e,s)=>(l(),r("div",X,[e.$slots.prefix?(l(),r("div",{key:0,class:P(["absolute inset-y-0 left-0 flex items-center",k.value,z(o)])},[T(e.$slots,"prefix")],2)):v("",!0),e.placeholder?w((l(),r("div",{key:1,class:P(["pointer-events-none absolute text-gray-500",[g.value,y.value]])},B(e.placeholder),3)),[[E,!e.modelValue]]):v("",!0),a("select",J({class:h.value,disabled:e.disabled,id:e.id,value:e.modelValue,onChange:x},z(f)),[(l(!0),r(L,null,$(_.value,c=>(l(),r("option",{key:c.value,value:c.value,disabled:c.disabled||!1,selected:e.modelValue===c.value},B(c.label),9,Z))),128))],16,Y)]))}}),se={class:"p-5"},ae={class:"w-fit"},le={class:"file-container"},te=["src"],re={key:0,class:"flex flex-wrap gap-5"},oe=["onUpdate:modelValue"],ue={__name:"ProcessorPage",setup(I){const m=d({mime:"",content:""}),t=K({mismatch:!1,doctype:"doctype"}),b=d("DocType"),f=d([]),x=D({url:"qcs_config_gdoc.api.utils.getProcessorInstances",auto:!0}),_=d();x.promise.then(()=>k());const k=()=>{x.data.map(u=>{f.value.push({label:u.instance_name,value:u.name})})},g=d(),y=d(),h=d(),o=d({}),e=d(),s=d(),c=u=>{var n=u.target.files[0];n&&Q(n).then(i=>{i=i.split(","),h.value=i,m.value.mime=i[0],m.value.content=i[1]})},N=()=>{q.submit({str:m.value,instanceName:s.value}).then(u=>{t.mismatch=!1,e.value=u,g.value=Object.keys(e.value),y.value=Object.keys(o.value),JSON.stringify(g.value)!==JSON.stringify(y.value)&&(t.mismatch=!0),g.value.map(n=>{o.value[n]=e.value[n]})})},O=()=>{if(!o.value){console.log("empty");return}V.insert.submit(o.value).then(u=>{console.log(u)})},U=()=>{console.log("Saved!")},q=D({url:"qcs_config_gdoc.api.processors.getProc"}),S=D({url:"qcs_config_gdoc.api.utils.getFieldsByInstance"});M(s,()=>{S.submit({instance:s.value}).then(()=>{o.value={},_.value=S.data.fields,_.value.map(u=>{o.value[u.fieldname]=""}),b.value=S.data.reference,V.update({doctype:b.value}),V.reload()})});const V=G({doctype:b.value,fields:["*"],auto:!1});return(u,n)=>(l(),r("div",null,[a("div",se,[a("div",ae,[f.value.length!=0?(l(),H(z(ee),{key:0,options:f.value,modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=i=>s.value=i),placeholder:"Select a Processor Instance"},null,8,["options","modelValue"])):v("",!0)]),n[2]||(n[2]=a("div",null,[a("h1",{class:"container"},"Upload Image")],-1)),a("div",null,[a("div",le,[a("div",null,[a("form",null,[a("input",{type:"file",id:"media",accept:"image/png",onChange:n[1]||(n[1]=i=>c(i))},null,32)])])]),a("div",null,[h.value?(l(),r("img",{key:0,src:h.value},null,8,te)):v("",!0)]),s.value?(l(),r("button",{key:0,class:"bg-gray-500 rounded-2xl px-5 mt-2",onClick:N},"Send?")):v("",!0),a("div",null,[o.value?(l(),r("div",re,[(l(!0),r(L,null,$(o.value,(i,C)=>(l(),r("div",{key:C},[a("p",null,B(C),1),w(a("input",{"onUpdate:modelValue":F=>o.value[C]=F,type:"text"},null,8,oe),[[W,o.value[C]]])]))),128))])):v("",!0),e.value?(l(),r("button",{key:1,class:"bg-red-300 rounded-2xl px-5 mt-5",onClick:U},"Save?")):v("",!0),e.value?(l(),r("button",{key:2,class:"bg-red-300 rounded-2xl px-5 mt-5",onClick:O},"Submit?")):v("",!0)])])])]))}};export{ue as default};
