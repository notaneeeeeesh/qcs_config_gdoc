import{d as U,L as $,M as q,a as h,m as l,y as t,g as N,I,x as M,z as v,N as P,O as T,A as V,v as o,F as z,D as B,E as j,r as d,f as G,H as S,e as H,P as J,q as K,Q as W,R as Q}from"./index-C93ZdGCA.js";const Y={class:"relative flex items-center"},X=["disabled","id","value"],Z=["value","disabled","selected"],ee=U({inheritAttrs:!1,__name:"Select",props:{size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},options:{}},emits:["update:modelValue"],setup(E,{emit:p}){const s=E,b=p;$();const x=q();function _(e){b("update:modelValue",e.target.value)}const k=h(()=>{var e;return((e=s.options)==null?void 0:e.map(u=>typeof u=="string"?{label:u,value:u}:u).filter(Boolean))||[]}),m=h(()=>s.disabled?"text-gray-500":"text-gray-800"),f=h(()=>({sm:"text-base",md:"text-base",lg:"text-lg",xl:"text-xl"})[s.size]),y=h(()=>({sm:"px-2",md:"px-2.5",lg:"px-3",xl:"px-3"})[s.size]),a=h(()=>{let e={sm:"rounded h-7",md:"rounded h-8",lg:"rounded-md h-10",xl:"rounded-md h-10"}[s.size],u=s.disabled?"disabled":s.variant,i={subtle:"border border-gray-100 bg-gray-100 hover:border-gray-200 hover:bg-gray-200 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white hover:border-gray-400 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",ghost:"bg-transparent border-transparent hover:bg-gray-200 focus:bg-gray-200 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border",s.variant!=="ghost"?"bg-gray-50":"",s.variant==="outline"?"border-gray-300":"border-transparent"]}[u];return[e,f.value,y.value,i,m.value,"transition-colors w-full py-0"]});let g=h(()=>({sm:"pl-2",md:"pl-2.5",lg:"pl-3",xl:"pl-3"})[s.size]);return(e,u)=>(l(),t("div",Y,[e.$slots.prefix?(l(),t("div",{key:0,class:N(["absolute inset-y-0 left-0 flex items-center",m.value,I(g)])},[M(e.$slots,"prefix")],2)):v("",!0),e.placeholder?P((l(),t("div",{key:1,class:N(["pointer-events-none absolute text-gray-500",[f.value,y.value]])},V(e.placeholder),3)),[[T,!e.modelValue]]):v("",!0),o("select",j({class:a.value,disabled:e.disabled,id:e.id,value:e.modelValue,onChange:_},I(x)),[(l(!0),t(z,null,B(k.value,i=>(l(),t("option",{key:i.value,value:i.value,disabled:i.disabled||!1,selected:e.modelValue===i.value},V(i.label),9,Z))),128))],16,X)]))}}),se={class:"file-container"},ae=["src"],le={key:0,class:"bg-red-600"},te={key:1,class:"flex flex-wrap gap-5"},oe=["onUpdate:modelValue"],re={__name:"EmiratesID",setup(E){const p=d({mime:"",content:""}),s=G({mismatch:!1,doctype:"doctype"}),b=d([]),x=S({url:"qcs_config_gdoc.api.utils.getProcessorInstances",auto:!0}),_=d();x.promise.then(()=>k());const k=()=>{console.log(x.data),x.data.map(c=>{b.value.push({label:c.instance_name,value:c.name})}),console.log(b.value)},m=d(),f=d(),y=d(),a=d({}),g=d(),e=d(),u=c=>{var n=c.target.files[0];n&&W(n).then(r=>{r=r.split(","),y.value=r,p.value.mime=r[0],p.value.content=r[1]})},i=()=>{A.submit({str:p.value,instanceName:e.value}).then(c=>{s.mismatch=!1,g.value=c,m.value=Object.keys(g.value),console.log(m.value.sort()),f.value=Object.keys(a.value),console.log(f.value.sort()),JSON.stringify(m.value)!==JSON.stringify(f.value)&&(s.mismatch=!0),m.value.map(n=>{a.value[n]=g.value[n]}),console.log(a.value)})},L=()=>{if(!a.value){console.log("empty");return}w.insert.submit(a.value),console.log("submitting")},O=()=>{console.log("Image Data:"),console.log(p.value),console.log("Receive Data:"),console.log(g.value),console.log("Unsaved Data:"),console.log(a.value)},R=()=>{console.log("Saved!")},A=S({url:"qcs_config_gdoc.api.processors.getProc"});S({url:"qcs_config_gdoc.api.utils.test",auto:!0});const D=S({url:"qcs_config_gdoc.api.utils.getFieldsByInstance"});H(e,()=>{D.submit({instance:e.value}).then(()=>{a.value={},_.value=D.data.fields,_.value.map(c=>{a.value[c.fieldname]=""}),s.doctype=D.data.reference,console.log(a.value)})});const w=J({doctype:s.doctype,fields:["*"],auto:!1});return(c,n)=>(l(),t("div",null,[o("div",null,[b.value.length!=0?(l(),K(I(ee),{key:0,options:b.value,modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=r=>e.value=r),placeholder:"Select a Processor Instance"},null,8,["options","modelValue"])):v("",!0),n[2]||(n[2]=o("h1",{class:"container"},"Upload Image",-1)),o("div",null,[o("div",se,[o("div",null,[o("form",null,[o("input",{type:"file",id:"media",accept:"image/png",onChange:n[1]||(n[1]=r=>u(r))},null,32)])])]),o("div",null,[y.value?(l(),t("img",{key:0,src:y.value},null,8,ae)):v("",!0)]),e.value?(l(),t("button",{key:0,class:"bg-gray-500 rounded-2xl px-5 mt-2",onClick:i},"Send?")):v("",!0),o("button",{class:"bg-gray-500 rounded-2xl px-5 mt-2",onClick:O},"Print"),o("div",null,[s.mismatch?(l(),t("h1",le,"WARNING: MISMATCHING FIELD NAMES BETWEEN DOCTYPE AND PROCESSOR FIELDS")):v("",!0),a.value?(l(),t("div",te,[(l(!0),t(z,null,B(a.value,(r,C)=>(l(),t("div",{key:C},[o("p",null,V(C),1),P(o("input",{"onUpdate:modelValue":F=>a.value[C]=F,type:"text"},null,8,oe),[[Q,a.value[C]]])]))),128))])):v("",!0),g.value?(l(),t("button",{key:2,class:"bg-red-300 rounded-2xl px-5 mt-5",onClick:R},"Save?")):v("",!0),g.value&&!s.mismatch?(l(),t("button",{key:3,class:"bg-red-300 rounded-2xl px-5 mt-5",onClick:L},"Submit?")):v("",!0)])])])]))}};export{re as default};
