import{d as E,L as F,M as A,a as m,m as a,y as r,g as w,I,x as T,z as v,N as L,O as j,A as z,v as l,F as P,D as N,E as J,r as d,f as K,H as D,e as M,P as H,q as Q,Q as G,R as W}from"./index-Bvcy-k11.js";const X={class:"relative flex items-center"},Y=["disabled","id","value"],Z=["value","disabled","selected"],ee=E({inheritAttrs:!1,__name:"Select",props:{size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},options:{}},emits:["update:modelValue"],setup(B,{emit:p}){const t=B,b=p;F();const f=A();function x(e){b("update:modelValue",e.target.value)}const _=m(()=>{var e;return((e=t.options)==null?void 0:e.map(s=>typeof s=="string"?{label:s,value:s}:s).filter(Boolean))||[]}),k=m(()=>t.disabled?"text-gray-500":"text-gray-800"),g=m(()=>({sm:"text-base",md:"text-base",lg:"text-lg",xl:"text-xl"})[t.size]),y=m(()=>({sm:"px-2",md:"px-2.5",lg:"px-3",xl:"px-3"})[t.size]),h=m(()=>{let e={sm:"rounded h-7",md:"rounded h-8",lg:"rounded-md h-10",xl:"rounded-md h-10"}[t.size],s=t.disabled?"disabled":t.variant,c={subtle:"border border-gray-100 bg-gray-100 hover:border-gray-200 hover:bg-gray-200 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",outline:"border border-gray-300 bg-white hover:border-gray-400 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",ghost:"bg-transparent border-transparent hover:bg-gray-200 focus:bg-gray-200 focus:border-gray-500 focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",disabled:["border",t.variant!=="ghost"?"bg-gray-50":"",t.variant==="outline"?"border-gray-300":"border-transparent"]}[s];return[e,g.value,y.value,c,k.value,"transition-colors w-full py-0"]});let o=m(()=>({sm:"pl-2",md:"pl-2.5",lg:"pl-3",xl:"pl-3"})[t.size]);return(e,s)=>(a(),r("div",X,[e.$slots.prefix?(a(),r("div",{key:0,class:w(["absolute inset-y-0 left-0 flex items-center",k.value,I(o)])},[T(e.$slots,"prefix")],2)):v("",!0),e.placeholder?L((a(),r("div",{key:1,class:w(["pointer-events-none absolute text-gray-500",[g.value,y.value]])},z(e.placeholder),3)),[[j,!e.modelValue]]):v("",!0),l("select",J({class:h.value,disabled:e.disabled,id:e.id,value:e.modelValue,onChange:x},I(f)),[(a(!0),r(P,null,N(_.value,c=>(a(),r("option",{key:c.value,value:c.value,disabled:c.disabled||!1,selected:e.modelValue===c.value},z(c.label),9,Z))),128))],16,Y)]))}}),se={class:"p-5"},ae={class:"w-fit"},te={class:"file-container"},le=["src"],re={key:0,class:"flex flex-wrap gap-5"},oe=["onUpdate:modelValue"],ue={__name:"EmiratesID",setup(B){const p=d({mime:"",content:""}),t=K({mismatch:!1,doctype:"doctype"}),b=d("DocType"),f=d([]),x=D({url:"qcs_config_gdoc.api.utils.getProcessorInstances",auto:!0}),_=d();x.promise.then(()=>k());const k=()=>{x.data.map(u=>{f.value.push({label:u.instance_name,value:u.name})})},g=d(),y=d(),h=d(),o=d({}),e=d(),s=d(),c=u=>{var n=u.target.files[0];n&&G(n).then(i=>{i=i.split(","),h.value=i,p.value.mime=i[0],p.value.content=i[1]})},O=()=>{U.submit({str:p.value,instanceName:s.value}).then(u=>{t.mismatch=!1,e.value=u,g.value=Object.keys(e.value),y.value=Object.keys(o.value),JSON.stringify(g.value)!==JSON.stringify(y.value)&&(t.mismatch=!0),g.value.map(n=>{o.value[n]=e.value[n]})})},$=()=>{if(!o.value){console.log("empty");return}V.insert.submit(o.value).then(u=>{console.log(u)})},R=()=>{console.log("Saved!")},U=D({url:"qcs_config_gdoc.api.processors.getProc"}),S=D({url:"qcs_config_gdoc.api.utils.getFieldsByInstance"});M(s,()=>{S.submit({instance:s.value}).then(()=>{o.value={},_.value=S.data.fields,_.value.map(u=>{o.value[u.fieldname]=""}),b.value=S.data.reference,V.update({doctype:b.value}),V.reload()})});const V=H({doctype:b.value,fields:["*"],auto:!1});return(u,n)=>(a(),r("div",null,[l("div",se,[l("div",ae,[f.value.length!=0?(a(),Q(I(ee),{key:0,options:f.value,modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=i=>s.value=i),placeholder:"Select a Processor Instance"},null,8,["options","modelValue"])):v("",!0)]),n[2]||(n[2]=l("h1",{class:"container"},"Upload Image",-1)),l("div",null,[l("div",te,[l("div",null,[l("form",null,[l("input",{type:"file",id:"media",accept:"image/png",onChange:n[1]||(n[1]=i=>c(i))},null,32)])])]),l("div",null,[h.value?(a(),r("img",{key:0,src:h.value},null,8,le)):v("",!0)]),s.value?(a(),r("button",{key:0,class:"bg-gray-500 rounded-2xl px-5 mt-2",onClick:O},"Send?")):v("",!0),l("div",null,[o.value?(a(),r("div",re,[(a(!0),r(P,null,N(o.value,(i,C)=>(a(),r("div",{key:C},[l("p",null,z(C),1),L(l("input",{"onUpdate:modelValue":q=>o.value[C]=q,type:"text"},null,8,oe),[[W,o.value[C]]])]))),128))])):v("",!0),e.value?(a(),r("button",{key:1,class:"bg-red-300 rounded-2xl px-5 mt-5",onClick:R},"Save?")):v("",!0),e.value?(a(),r("button",{key:2,class:"bg-red-300 rounded-2xl px-5 mt-5",onClick:$},"Submit?")):v("",!0)])])])]))}};export{ue as default};
